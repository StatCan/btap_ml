name: Process data Function
description: Clean and split the data downloaded from minio which is the output from download_data.yaml

inputs:
- {name: Tenant, type: String, description: 'Name of minio tenant to access data from'}
- {name: Bucket, type: String, description: 'Name of minio bucket to access data from'}
- {name: Object Name, type: String, description: 'Name of object to access data from'}
- {name: Hourly File, type: String, description: 'Name of the hourly energy file'}
- {name: Weather File, type: String, description: 'Name of weather file'}
- {name: Minio destination, type: String, description: 'Name of minio bucket to access data from'}
outputs:
- {name: Minio destination, type: String, description: 'Path where the output data will be stored.'}

implementation:
  container:
    # The strict name of a container image that you've pushed to a container registry.
    image: fernandolpz/only-tests:download_data_v3
    command: [
      python3, 
      
      # Path of the program inside the container
      preprocessing.py,
      
      --tenant,
      {inputValue: Tenant},
      
      --bucket,
      {inputValue: Bucket},
      
      --in_build_params,
      {inputValue: Object Name},
      
      --in_hour,
      {inputValue: Hourly File},
      
      --in_weather,
      {inputValue: Weather File},
      
      --in_build_params,
      {inputValue: Object Name},
      
      --output_path,
      {outputPath: Minio destination},
    ]